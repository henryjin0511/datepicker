!function(t){function e(t){return new a(t)}function a(t){var e={triEle:"",format:"yyyy-mm-dd",showTime:!1,change:null},r=a.deepcopy(e,t);r.triEle="object"==typeof r.triEle?r.triEle:document.getElementById(r.triEle),r.tarEle=void 0===r.tarEle?r.triEle:"object"==typeof r.tarEle?r.tarEle:document.getElementById(r.tarEle),this.opts=r,this.init()}var r=0;if(a.deepcopy=function(t,e){t=t||{};for(var r in e)e.hasOwnProperty(r)&&("object"==typeof e[r]?(t[r]=e[r].constructor===Array?[]:{},a.deepcopy(t[r],e[r])):t[r]=e[r]);return t},a.on=function(e,a,r){document.addEventListener?e.addEventListener(a,r,!1):e.attachEvent("on"+a,function(){r.call(e,t.event)})},a.data=function(t,e,a){if(void 0!==document.documentElement.dataset){if(2===arguments.length)return t.dataset[e];t.dataset[e]=a}else{if(2===arguments.length)return t.getAttribute("data-"+e);t.setAttribute("data-"+e,a)}},a.stopPropagation=function(e){e=e||t.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},a.preventDefault=function(e){e=e||t.event,e.preventDefault?e.preventDefault():e.returnValue=!1},a.getByClass=function(){var t=1===arguments.length?document:arguments[0],e=1===arguments.length?arguments[0]:arguments[1];if(document.getElementsByClassName)return t.getElementsByClassName(e);for(var a=t.getElementsByTagName("*"),r=[],n=[],s=0;s<a.length;s++){n=a[s].className.split(" ");for(var o=0;o<n.length;o++)n[o]===e&&r.push(a[s])}return r},a.fill=function(t){return t<10?"0"+(0|t):t},a.getTarget=function(e){var a=e||t.event;return a.target||a.srcElement},a.prototype.init=function(){r++;var t=this;t.createDom(),t.bindEvent(),a.on(document,"click",function(){t.oDiv&&t.close()}),a.on(t.opts.triEle,"click",function(e){a.stopPropagation(e),a.preventDefault(e),t.oDiv&&t.show()})},a.prototype.getTriValue=function(){var t=this,e=t.opts,a=e.tarEle;return"input"===a.tagName.toLowerCase()?a.value:a.innerText},a.prototype.setTriValue=function(t){var e=this,a=e.opts,r=a.tarEle;"input"===r.tagName.toLowerCase()?r.value=t:r.innerText=t},a.prototype.initData=function(t){var e=this,a=e.getTriValue();if(!t){var r=e.opts.format.replace(/yyyy|mm|dd|hh|ii|ss/g,"\\d+");""===a||new RegExp(r).test(a)||e.setTriValue("")}var n=a.match(/\d+/g)||[];n.length>=3?(n.length=6,n[3]=void 0===n[3]?"00":n[3],n[4]=void 0===n[4]?"00":n[4],n[5]=void 0===n[5]?"00":n[5],n[0]<100||n[1]<0||n[1]>12||n[2]<1||n[2]>31||n[3]<0||n[3]>23||n[4]<0||n[4]>59||n[5]<0||n[3]>59?(e.setTriValue(""),e.timestamp=function(){var t=new Date;return t.setHours(0,0,0),t}().getTime()):e.timestamp=new Date(n[0],n[1]-1,n[2],n[3],n[4],n[5]).getTime()):e.timestamp=function(){var t=new Date;return t.setHours(0,0,0),t}().getTime(),e.showDateObj=new Date(e.timestamp)},a.prototype.createDom=function(){var t=this,e=0,n=0,s=["日","一","二","三","四","五","六"];t.oDiv=document.createElement("div"),t.oDiv.id="datepicker-box"+r,t.oDiv.className="datepicker-box",t.oDiv.style.display="none";var o="";o+='<div id="datepicker-default" class="datepicker-default">\t\t<div class="datepicker-default-top">\t\t\t<a class="datepicker-default-prev-year" href="javascript:;">&laquo;</a>\t\t\t<a class="datepicker-default-prev-month" href="javascript:;">&lsaquo;</a>\t\t\t<a class="datepicker-default-select-year" href="javascript:;"></a>\t\t\t<a class="datepicker-default-select-month" href="javascript:;"></a>\t\t\t<a class="datepicker-default-next-month" href="javascript:;">&rsaquo;</a>\t\t\t<a class="datepicker-default-next-year" href="javascript:;">&raquo;</a>\t\t</div>       <div class="datepicker-default-middle"><table class="datepicker-default-table"><thead><tr>'+function(){for(var t="",e=0;e<s.length;e++)t+="<th>"+s[e]+"</th>";return t}()+"</tr></thead><tbody>"+function(){var t="";for(e=0;e<6;e++)for(n=0;n<7;n++)t+=0===n?"<tr><td><span></span></td>":6===n?"<td><span></span></td></tr>":"<td><span></span></td>";return t}()+'</tbody></table></div><div class="datepicker-default-bottom">       <div class="datepicker-default-opt">\t\t\t  <a class="datepicker-default-opt-clear" href="javascript:;">清空</a>\t\t\t  <a class="datepicker-default-opt-confirm" href="javascript:;">确定</a>\t\t\t  <a class="datepicker-default-opt-today" href="javascript:;">今日</a>\t\t</div>\t\t<div class="time">\t\t\t<a class="datepicker-default-select-hour" href="javascript:;"></a>\t\t\t<span>:</span>\t\t\t<a class="datepicker-default-select-minute" href="javascript:;"></a>\t\t\t<span>:</span>\t\t\t<a class="datepicker-default-select-second" href="javascript:;"></a>\t\t</div>\t</div></div><div class="datepicker-year">\t\t<div class="datepicker-year-top">\t\t\t<span class="datepicker-year-show-year"></span>\t    </div>       <div>\t\t    <table class="datepicker-year-middle">\t\t\t    <tbody>                   <tr><td><span data-view="year" data-year="prev" href="javascript:;">&laquo;</span></td><td><span></span></td><td><span></span></td></tr>                       <tr><td><span></span></td><td><span></span></td><td><span></span></td></tr>                   <tr><td><span></span></td><td><span></span></td><td><span></span></td></tr>                   <tr><td><span></span></td><td><span></span></td><td><span data-view="year" data-year="next" href="javascript:;">&raquo;</span></td></tr>\t\t\t    </tbody>\t\t    </table>\t\t</div>\t</div><div class="datepicker-month">\t\t<div class="datepicker-month-top">\t\t\t<span class="datepicker-month-show-month"></span>\t\t</div>\t\t<div class="datepicker-month-middle">\t\t<table>\t\t\t<tbody><tr>'+function(){for(var t=0,e="";t<12;t++)e+=(t+1)%3==0&&t+1!==12?'<td><span data-view="month" data-month="'+(t+1)+'">'+(t+1)+"月</span></td></tr><tr>":'<td><span data-view="month" data-month="'+(t+1)+'">'+(t+1)+"月</span></td>";return e}()+'\t\t\t</tr></tbody>\t\t</table>\t    </div>\t</div><div class="datepicker-hour">\t\t<div class="datepicker-hour-top">选择时</div>\t\t<div class="datepicker-hour-middle">\t\t<table>\t\t\t<tbody><tr>'+function(){for(var t=0,e="";t<24;t++)e+=(t+1)%4==0&&t+1!==24?'<td><span data-view="hour" data-hour="'+t+'">'+a.fill(t)+"</span></td></tr><tr>":'<td><span data-view="hour" data-hour="'+t+'">'+a.fill(t)+"</span></td>";return e}()+'\t\t\t</tr></tbody>\t\t</table>\t    </div>\t</div><div class="datepicker-minute">\t\t<div class="datepicker-minute-top">选择分</div>\t\t<div class="datepicker-minute-middle">\t\t<table>\t\t\t<tbody><tr>'+function(){for(var t=0,e="";t<60;t++)e+=(t+1)%10==0&&t+1!==60?'<td><span data-view="minute" data-minute="'+t+'">'+a.fill(t)+"</span></td></tr><tr>":'<td><span data-view="minute" data-minute="'+t+'">'+a.fill(t)+"</span></td>";return e}()+'\t\t\t</tr></tbody>\t\t</table>\t    </div>\t</div><div class="datepicker-second">\t\t<div class="datepicker-second-top">选择秒</div>\t\t<div class="datepicker-second-middle">\t\t<table>\t\t\t<tbody><tr>'+function(){for(var t=0,e="";t<60;t++)e+=(t+1)%10==0&&t+1!==60?'<td><span data-view="second" data-second="'+t+'">'+a.fill(t)+"</span></td></tr><tr>":'<td><span data-view="second" data-second="'+t+'">'+a.fill(t)+"</span></td>";return e}()+"\t\t\t</tr></tbody>\t\t</table>\t    </div>\t</div>",t.oDiv.innerHTML=o,document.body.appendChild(t.oDiv),t.oDiv=document.getElementById("datepicker-box"+r),t.oYearDiv=a.getByClass(t.oDiv,"datepicker-year")[0],t.oMonthDiv=a.getByClass(t.oDiv,"datepicker-month")[0],t.oHourDiv=a.getByClass(t.oDiv,"datepicker-hour")[0],t.oMinuteDiv=a.getByClass(t.oDiv,"datepicker-minute")[0],t.oSecondDiv=a.getByClass(t.oDiv,"datepicker-second")[0]},a.prototype.bindEvent=function(){var t=this,e=t.oDiv;a.on(e,"click",function(e){a.preventDefault(e),a.stopPropagation(e);var r=a.getTarget(e),n=a.data(r,"view"),s=0,o=0,i=0,d=0,l=0,c=0;switch(r.nodeName.toLowerCase()){case"span":switch(n){case"day":s=a.data(r,"year"),o=a.data(r,"month"),i=a.data(r,"day"),t.showDateObj.setFullYear(s),t.showDateObj.setMonth(o-1),t.showDateObj.setDate(i),t.returnDate();break;case"month":o=a.data(r,"month"),t.showDateObj.setMonth(o-1),t.render(),t.oMonthDiv.style.display="none";break;case"year":if("prev"===(s=a.data(r,"year"))||"next"===s)return t.viewYearStart&&t.viewYearStart>101&&"prev"===s&&t.renderYearSelect(s),!1;t.showDateObj.setFullYear(s),t.render(),t.oYearDiv.style.display="none";break;case"hour":d=a.data(r,"hour"),t.showDateObj.setHours(d),t.render(),t.oHourDiv.style.display="none";break;case"minute":l=a.data(r,"minute"),t.showDateObj.setMinutes(l),t.render(),t.oMinuteDiv.style.display="none";break;case"second":c=a.data(r,"second"),t.showDateObj.setSeconds(c),t.render(),t.oSecondDiv.style.display="none"}break;case"a":switch(r.className){case"datepicker-default-prev-year":t.prevYear();break;case"datepicker-default-prev-month":t.prevMonth();break;case"datepicker-default-next-month":t.nextMonth();break;case"datepicker-default-next-year":t.nextYear();break;case"datepicker-default-select-year":var p=parseInt(r.innerText);t.renderYearSelect(p);break;case"datepicker-default-select-month":var u=parseInt(r.innerText);t.renderMonthSelect(u);break;case"datepicker-default-select-hour":var v=parseInt(r.innerText);t.renderHourSelect(v);break;case"datepicker-default-select-minute":var f=parseInt(r.innerText);t.renderMinuteSelect(f);break;case"datepicker-default-select-second":var y=parseInt(r.innerText);t.renderSecondSelect(y);break;case"datepicker-default-opt-confirm":t.returnDate();break;case"datepicker-default-opt-clear":t.clear();break;case"datepicker-default-opt-today":t.today()}}})},a.prototype.render=function(){for(var t=this,e=t.opts,r=t.oDiv,n=a.getByClass(r,"datepicker-default-table")[0],s=n.getElementsByTagName("span"),o=t.showDateObj,i=[31,28+function(){var t=o.getFullYear();return t%4==0?1:0}(),31,30,31,30,31,31,30,31,30,31],d=o.getFullYear(),l=o.getMonth()+1,c=o.getHours(),p=o.getMinutes(),u=o.getSeconds(),v=new Date(d,l-1,1).getDay(),f=o.getDate(),y=0;y<s.length;y++){var h,m,g,k=y+1;s[y].className="",k<v+1?(1===l?(h=d-1,m=12):(h=d,m=l-1),g=i[m-1]-v+k,s[y].className="prev"):k>v+i[l-1]?(12===l?(h=d+1,m=1):(h=d,m=l+1),g=k-v-i[l-1],s[y].className="next"):(h=d,m=l,g=k-v,k-v===f&&(s[y].className="today")),s[y].innerHTML=g,a.data(s[y],"view","day"),a.data(s[y],"year",h),a.data(s[y],"month",m),a.data(s[y],"day",g)}a.getByClass(r,"datepicker-default-select-year")[0].innerHTML=d+"年",a.getByClass(r,"datepicker-default-select-month")[0].innerHTML=l+"月",a.getByClass(r,"datepicker-default-select-hour")[0].innerHTML=a.fill(c),a.getByClass(r,"datepicker-default-select-minute")[0].innerHTML=a.fill(p),a.getByClass(r,"datepicker-default-select-second")[0].innerHTML=a.fill(u),e.showTime===!1&&(r.querySelector(".time").style.display="none")},a.prototype.renderYearSelect=function(t){var e,r,n=this,s=n.oDiv,o=n.oYearDiv,i=n.showDateObj.getFullYear(),d=a.getByClass(o,"datepicker-year-middle")[0];n.viewYearStart="prev"===t?n.viewYearStart-10:"next"===t?n.viewYearStart+10:i-i%10,t=i,e=n.viewYearStart,r=e+9;for(var l=0,c=d.getElementsByTagName("span");l<c.length;l++)c[l].className="",0!==l&&l!==c.length-1?(a.data(c[l],"view","year"),a.data(c[l],"year",e+l-1),c[l].innerText=e+l-1,t===e+l-1&&(c[l].className="cur")):e<=101&&0===l&&(c[l].className="disabled");a.getByClass(s,"datepicker-year-show-year")[0].innerHTML=e+"-"+r,n.oYearDiv.style.display="block"},a.prototype.renderMonthSelect=function(t){for(var e=this,r=e.oMonthDiv,n=a.getByClass(r,"datepicker-month-middle")[0],s=0,o=n.getElementsByTagName("span");s<o.length;s++)o[s].className="",s+1===t&&(o[s].className="cur");a.getByClass(r,"datepicker-month-show-month")[0].innerHTML=t+"月",r.style.display="block"},a.prototype.renderHourSelect=function(t){for(var e=this,a=e.oHourDiv,r=0,n=a.getElementsByTagName("span");r<n.length;r++)n[r].className="",r===t&&(n[r].className="cur");a.style.display="block"},a.prototype.renderMinuteSelect=function(t){for(var e=this,a=e.oMinuteDiv,r=0,n=a.getElementsByTagName("span");r<n.length;r++)n[r].className="",r===t&&(n[r].className="cur");a.style.display="block"},a.prototype.renderSecondSelect=function(t){for(var e=this,a=e.oSecondDiv,r=0,n=a.getElementsByTagName("span");r<n.length;r++)n[r].className="",r===t&&(n[r].className="cur");a.style.display="block"},a.prototype.today=function(){var t=this,e=t.opts;t.showDateObj=new Date,e.showTime===!1&&t.showDateObj.setHours(0,0,0),t.returnDate()},a.prototype.clear=function(){var t=this;t.setTriValue(""),t.close()},a.prototype.close=function(){var t=this;t.open=!1,t.oDiv.style.display="none"},a.prototype.show=function(){var t=this;if(t.open===!0)return!1;t.open=!0,t.oYearDiv.style.display="none",t.oMonthDiv.style.display="none",t.oHourDiv.style.display="none",t.oMinuteDiv.style.display="none",t.oSecondDiv.style.display="none",t.initData(),t.render(),t.oDiv.style.display="block",t.oDiv.style.left="-9999px",t.oDiv.style.top="-9999px",t.getPosition()},a.prototype.getPosition=function(){var t=this,e=t.opts.triEle,a=e.getBoundingClientRect(),r=a.top-document.documentElement.clientTop,n=a.bottom-document.documentElement.clientTop,s=a.left-document.documentElement.clientLeft,o=document.documentElement.clientHeight,i=document.documentElement.scrollTop,d=t.oDiv.offsetHeight,l=0;l=r+d>o&&r>d?i+r-d:i+n,t.oDiv.style.top=l+"px",t.oDiv.style.left=s+"px"},a.prototype.returnDate=function(){var t=this,e=t.opts,a=t.showDateObj,r={y:a.getFullYear(),m:a.getMonth()+1,d:a.getDate(),h:a.getHours(),i:a.getMinutes(),s:a.getSeconds()},n=e.format.replace(/(y+|m+|d+|h+|i+|s+)/g,function(t){return("0"+r[t.slice(-1)]).slice(parseInt("-"+t.length))});"function"==typeof e.change?e.change.call(t,n):t.setTriValue(n),t.close()},a.prototype.prevMonth=function(){var t=this,e=t.showDateObj,a=e.getFullYear(),r=e.getMonth();if(0===r){if(a<=100)return!1;e.setFullYear(a-1),e.setMonth(11)}else e.setMonth(r-1);t.render()},a.prototype.nextMonth=function(){var t=this,e=t.showDateObj,a=e.getFullYear(),r=e.getMonth();11===r?(e.setFullYear(a+1),e.setMonth(0)):e.setMonth(r+1),t.render()},a.prototype.prevYear=function(){var t=this,e=t.showDateObj,a=e.getFullYear();if(a<=101)return!1;e.setFullYear(a-1),t.render()},a.prototype.nextYear=function(){var t=this,e=t.showDateObj,a=e.getFullYear();e.setFullYear(a+1),t.render()},"object"==("undefined"==typeof module?"undifined":typeof module)&&"object"==typeof module.exports)module.exports=e;else if(t.datepicker=e,"function"==typeof define&&define.amd)e}(window);